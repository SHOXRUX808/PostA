<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .post-form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 400px;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        input, textarea, button {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        textarea {
            resize: none;
        }

        button {
            background-color: #28a745;
            color: white;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #218838;
        }

        .button-list {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .button-item {
            background-color: #f0f0f0;
            padding: 5px;
            margin-bottom: 5px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .button-item span {
            flex-grow: 1;
            margin-right: 10px;
        }

        .button-item button {
            background-color: #dc3545;
            font-size: 12px;
            padding: 5px 10px;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="post-form">
        <h2>üì¢ –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏</h2>

        <label for="media">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ:</label>
        <input type="file" id="media" accept="image/*,video/*">

        <label for="text">–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞:</label>
        <textarea id="text" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞"></textarea>

        <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏</h3>
        <label for="buttonName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏:</label>
        <input type="text" id="buttonName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏">

        <label for="buttonUrl">URL –∫–Ω–æ–ø–∫–∏:</label>
        <input type="text" id="buttonUrl" placeholder="–í–≤–µ–¥–∏—Ç–µ URL –∫–Ω–æ–ø–∫–∏">

        <button onclick="addButton()">–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É</button>

        <div class="button-list" id="buttonList"></div>

        <button onclick="sendPost()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å—Ç</button>
    </div>

    <script>
        let buttons = []; // –°–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ —Å–ø–∏—Å–æ–∫
        function addButton() {
            const name = document.getElementById("buttonName").value;
            const url = document.getElementById("buttonUrl").value;

            if (name && url) {
                buttons.push({ text: name, url: url });
                updateButtonList();
                document.getElementById("buttonName").value = "";
                document.getElementById("buttonUrl").value = "";
            } else {
                alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ URL –∫–Ω–æ–ø–∫–∏!");
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–Ω–æ–ø–æ–∫
        function updateButtonList() {
            const buttonList = document.getElementById("buttonList");
            buttonList.innerHTML = "";
            buttons.forEach((button, index) => {
                buttonList.innerHTML += `
                    <div class="button-item">
                        <span>üîó ${button.text} - ${button.url}</span>
                        <button onclick="removeButton(${index})">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
            });
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞
        function removeButton(index) {
            buttons.splice(index, 1);
            updateButtonList();
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—Å—Ç–∞ —Å –º–µ–¥–∏–∞ –∏ –∫–Ω–æ–ø–∫–∞–º–∏
        function sendPost() {
            const botToken = "7501670344:AAEWj8Ohu2aeCnhYhQx7kU4hXhyhqdExBgU"; // –í–∞—à —Ç–æ–∫–µ–Ω
            const chatId = "-1002130936135"; // ID –∫–∞–Ω–∞–ª–∞, –Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è —Å -100
            const text = document.getElementById("text").value;
            const mediaInput = document.getElementById("media");

            if (!mediaInput.files.length || !text) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª –∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç!");
                return;
            }

            const file = mediaInput.files[0];
            const formData = new FormData();
            const isVideo = file.type.startsWith("video/");

            formData.append("chat_id", chatId);
            formData.append(isVideo ? "video" : "photo", file);
            formData.append("caption", text);

            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∏
            if (buttons.length > 0) {
                const replyMarkup = {
                    inline_keyboard: buttons.map(button => [{ text: button.text, url: button.url }])
                };
                formData.append("reply_markup", JSON.stringify(replyMarkup));
            }

            const url = `https://api.telegram.org/bot${botToken}/${isVideo ? "sendVideo" : "sendPhoto"}`;

            fetch(url, {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(result => {
                if (result.ok) {
                    alert("–ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
                    // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                    document.getElementById("media").value = "";
                    document.getElementById("text").value = "";
                    buttons = [];
                    updateButtonList();
                } else {
                    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: " + result.description);
                }
            })
            .catch(error => {
                alert("–û—à–∏–±–∫–∞: " + error.message);
            });
        }
    </script>
</body>
</html>
